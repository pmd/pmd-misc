<project name="pmd" default="compile" basedir="../">

<property name="lib" value="lib\"/>
<property name="src" value="src\"/>
<property name="resources" value="resources\"/>
<property name="build" value="build\"/>
<property name="regress" value="regress\"/>
<property name="version" value="0.1"/>
<property name="jnlp_staging_area" value="/home/tom/misc/importscrubberjnlp/"/>

<path id="classpath.path">
<pathelement location="${build}"/>
<fileset dir="${lib}">
<include name="*.jar"/>
</fileset>
</path>

<target name="delete">
    <delete dir="${build}"/>
    <mkdir dir="${build}"/>
</target>

<target name="compile">
    <mkdir dir="${build}"/>
    <javac  deprecation="false"
            debug="true"
            optimize="false"
            srcdir="${src}:${regress}"
            destdir="${build}">
<classpath>
    <path refid="classpath.path"/>
</classpath>
    </javac>
</target>

<target name="copy">
    <mkdir dir="${lib}"/>
    <copy todir="${build}">
        <fileset dir="${resources}">
            <include name="**/*.gif"/>
            <include name="**/*.jpg"/>
            <include name="**/*.properties"/>
        </fileset>
    </copy>
</target>

<target name="jar" depends="copy,compile">
    <jar jarfile="${lib}\pmd-swingui-${version}.jar" basedir="${build}" manifest="etc/MANIFEST.MF"/>
</target>

<target name="clean" depends="delete,compile"/>

<target name="dist" depends="clean,jar"/>

<target name="sign-quick">
    <signjar jar="${lib}/pmd-swingui-${version}.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
</target>

<target name="jnlp-quick">
    <echo message="Uploading pmd-swing jar file"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/pmd-swingui-${version}.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading swingui.jnlp"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/etc/swingui.jnlp tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
</target>

<target name="sign-all">
    <signjar jar="${lib}/pmd-swingui-${version}.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
    <signjar jar="${lib}/pmd-1.1.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
    <signjar jar="${lib}/jaxen-core-1.0-fcs.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
    <signjar jar="${lib}/saxpath-1.0-fcs.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
    <signjar jar="${lib}/xercesImpl-2.0.2.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
    <signjar jar="${lib}/xmlParserAPIs-2.0.2.jar" alias="myself" keystore="${jnlp_staging_area}myKeyStore" storepass="password"/>
</target>


<target name="jnlp-all" depends="dist,sign-all">
    <echo message="Uploading pmd-swing jar file"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/pmd-swingui-${version}.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading pmd jar file"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/pmd-1.1.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading jaxen-core-1.0-fcs.jar"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/jaxen-core-1.0-fcs.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading saxpath-1.0-fcs.jar"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/saxpath-1.0-fcs.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading xercesImpl-2.0.2.jar"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/xercesImpl-2.0.2.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading xmlParserAPIs-2.0.2.jar"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/lib/xmlParserAPIs-2.0.2.jar tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
    <echo message="Uploading swingui.jnlp"/>
    <exec executable="scp" os="Linux">
        <arg line=" /home/tom/data/pmd/pmd-swingui/etc/swingui.jnlp tomcopeland@pmd.sourceforge.net:/home/groups/p/pm/pmd/htdocs/"/>
    </exec>
</target>

</project>




